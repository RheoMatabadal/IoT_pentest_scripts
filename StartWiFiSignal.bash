apt-get install hostapd dnsmasq;
sudo service hostapd stop;
sudo service dnsmasq stop;
sudo update-rc.d hostapd disable;
sudo update-rc.d dnsmasq disable;
echo # Bind to only one interface >> /etc/dnsmasq.conf;
echo bind-interfaces >> /etc/dnsmasq.conf;
echo # Choose interface for binding >> /etc/dnsmasq.conf;
echo interface=wlan0 >> /etc/dnsmasq.conf;
echo # Specify range of IP addresses for DHCP leasses >> /etc/dnsmasq.conf;
echo dhcp-range=192.168.150.2,192.168.150.10 >> /etc/dnsmasq.conf;
echo # Define interface >> /etc/hostapd.conf;
echo interface=wlan0 >> /etc/hostapd.conf;
echo # Select driver >> /etc/hostapd.conf;
echo driver=nl80211 >> /etc/hostapd.conf;
echo # Set access point name >> /etc/hostapd.conf;
echo ssid=myhotspot >> /etc/hostapd.conf;
echo # Set access point harware mode to 802.11g >> /etc/hostapd.conf;
echo hw_mode=g >> /etc/hostapd.conf;
echo # Set WIFI channel (can be easily changed) >> /etc/hostapd.conf;
echo channel=6 >> /etc/hostapd.conf;
echo # Enable WPA2 only (1 for WPA, 2 for WPA2, 3 for WPA + WPA2) >> /etc/hostapd.conf;
echo wpa=2 >> /etc/hostapd.conf;
echo wpa_passphrase=securepassword >> /etc/hostapd.conf;
echo wpa_passphrase=securepassword;

echo Wireless adapter created;
echo Creating hotstop.sh;
echo #!/bin/bash >> hotspot.sh;
echo # Start >> hotspot.sh;
echo # Configure IP address for WLAN >> hotspot.sh;
echo sudo ifconfig wlan0 192.168.150.1 >> hotspot.sh;
echo # Start DHCP/DNS server >> hotspot.sh;
echo sudo service dnsmasq restart >> hotspot.sh;
echo # Enable routing >> hotspot.sh;
echo sudo sysctl net.ipv4.ip_forward=1 >> hotspot.sh;
echo # Enable NAT >> hotspot.sh;
echo sudo iptables -t nat -A POSTROUTING -o ppp0 -j MASQUERADE >> hotspot.sh;
echo # Run access point daemon >> hotspot.sh;
echo sudo hostapd /etc/hostapd.conf >> hotspot.sh;
echo # Stop >> hotspot.sh;
echo # Disable NAT >> hotspot.sh;
echo sudo iptables -D POSTROUTING -t nat -o ppp0 -j MASQUERADE >> hotspot.sh;
echo # Disable routing >> hotspot.sh; 
echo sudo sysctl net.ipv4.ip_forward=0 >> hotspot.sh;
echo # Disable DHCP/DNS server >> hotspot.sh;
echo sudo service dnsmasq stop >> hotspot.sh;
echo sudo service hostapd stop >> hotspot.sh;

echo created hotspot.sh
echo running hotspot.sh
bash ./hotspot.sh

